@model IEnumerable<Publishers>
<!-- BEGIN Main Content -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
<style>
    .file {
        visibility: hidden;
        position: absolute;
    }
</style>

<div class="row">
    <div class="col-md-12">
        <div class="box">
            <div class="box-title">
                <h3><i class="fa fa-table"></i> Dynamic Table</h3>
                <div class="box-tool">
                    <a data-action="collapse" href="#"><i class="fa fa-chevron-up"></i></a>
                    <a data-action="close" href="#"><i class="fa fa-times"></i></a>
                </div>
            </div>
            <div class="box-content">
                <div class="btn-toolbar pull-right clearfix">
                    <div class="btn-group">
                        <a class="btn btn-circle show-tooltip" title="Add new record" href="#"><i class="fa fa-plus"></i></a>
                        <a class="btn btn-circle show-tooltip" title="Edit selected" href="#"><i class="fa fa-edit"></i></a>
                        <a class="btn btn-circle show-tooltip" title="Delete selected" href="#"><i class="fa fa-trash-o"></i></a>
                    </div>
                    <div class="btn-group">
                        <a class="btn btn-circle show-tooltip" title="Print" href="#"><i class="fa fa-print"></i></a>
                        <a class="btn btn-circle show-tooltip" title="Export to PDF" href="#"><i class="fa fa-file-text-o"></i></a>
                        <a class="btn btn-circle show-tooltip" title="Export to Exel" href="#"><i class="fa fa-table"></i></a>
                    </div>
                    <div class="btn-group">
                        <a class="btn btn-circle show-tooltip" title="Refresh" href="#"><i class="fa fa-repeat"></i></a>
                    </div>
                </div>
                <br /><br />
                <div class="clearfix"></div>
                <div class="table-responsive" style="border:0">
                    <table class="table table-advance" id="tablePublishers">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Logo</th>
                                <th>Name</th>
                                <th>Address</th>
                                <th>Phone</th>
                                <th>Email</th>
                                <th class="text-center">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var p in Model)
                            {
                                <tr class="table-flag-blue">
                                    <td><b>@p.PublisherId</b></td>
                                    <td>
                                        <img src="~/Image/@p.Logo" alt="Image" width="80" height="80" />
                                    </td>
                                    <td>@p.PublisherName</td>
                                    <td>@p.Address</td>
                                    <td>@p.Phone</td>
                                    <td>@p.Email</td>
                                    <td class="text-center">
                                        <div class="btn-group">
                                            <p>
                                                <button class="btn btn-primary btnEdit" data-id="@p.PublisherId" data-target="#modalDetail" data-toggle="modal"><i class="fa fa-edit"></i> Edit</button>
                                                <button class="btn btn-danger btnDelete" data-id="@p.PublisherId" data-name="@p.PublisherName"><i class="fa fa-trash-o"></i> Delete</button>
                                            </p>
                                        </div>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- END Main Content -->
<!-- Modal -->
<div class="modal fade bd-example-modal-lg" id="modalDetail" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Thông tin</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div id="modalBody">
                @*<div class="container-fluid">
                    <div class="row" style="margin-top:20px">
                        <form>
                            <div class="col-md-4">
                                <div class="row" style="margin-left:20px">
                                    <img src="~/Image/nxb-giao-duc.jpg" width="180" height="180" id="preview">
                                </div>
                                <div class="row" style="margin-left:20px">
                                    <div id="msg"></div>
                                    <input type="file" name="img" class="file" accept="image/*">
                                    <div class="input-group my-3">
                                        <input type="text" class="form-control" disabled placeholder="Upload File" id="file" />
                                        <br />
                                        <div style="text-align:center;margin-top:20px">
                                            <button type="button" class="browse btn btn-primary">Chọn hình...</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Tên nhà xuất bản:</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" value="adin tốt cao">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Địa chỉ: </label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" value="email@example.com">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Số điện thoại: </label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" value="0938965143">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Email: </label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" value="minhlc98@gmail.com">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label">Mô tả: </label>
                                    <div class="col-sm-8">
                                        <textarea class="form-control" style="resize:none"></textarea>
                                    </div>
                                </div>

                            </div>
                        </form>
                    </div>
                </div>*@
            </div>
            
        </div>
    </div>
</div>

@section Scripts{
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
    <script type="text/javascript" src="~/Admin/assets/data-tables/bootstrap3/dataTables.bootstrap.js"></script>
    <script src="~/Admin/js/Publisher.js"></script>
    <script>
        //$(document).on("click", ".browse", function () {
        //    var file = $(this).parents().find(".file");
        //    file.trigger("click");
        //});
        //$('input[type="file"]').change(function (e) {
        //    var fileName = e.target.files[0].name;
        //    $("#file").val(fileName);

        //    var reader = new FileReader();
        //    reader.onload = function (e) {
        //        // get loaded data and render thumbnail.
        //        document.getElementById("preview").src = e.target.result;
        //    };
        //    // read the image file as a data URL.
        //    reader.readAsDataURL(this.files[0]);
        //});

        $('#tablePublishers tbody').on('click', '.btnEdit', function () {
            var idItem = $(this).data("id");
            //var nameItem = $(this).data("name");
            var item = $(this).parents('tr');
            $.ajax({
                url: "/Admin/Publisher/Edit",
                type: "GET",
                data: {
                    id: idItem
                },
                success: function (data) {
                    $("#modalBody").html("");
                    $("#modalBody").html(data);
                    //$("#modalBody").modal("show");
                }
            });

        });
    </script>
    @*<script>
            $(function () {
                $.ajax({
                    url: "/Admin/ProductCategory/GetCategoriesList",
                    type: "GET",
                    success: function (response) {
                        console.log(response);
                    },
                    error: function (response) {
                        console.log("error");
                    }
                });
            });
        </script>*@
}
